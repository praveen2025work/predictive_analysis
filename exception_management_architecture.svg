<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients for each layer -->
    <linearGradient id="uiGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:0.1"/>
      <stop offset="100%" style="stop-color:#4F46E5;stop-opacity:0.05"/>
    </linearGradient>
    
    <linearGradient id="serviceGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#059669;stop-opacity:0.1"/>
      <stop offset="100%" style="stop-color:#059669;stop-opacity:0.05"/>
    </linearGradient>
    
    <linearGradient id="dbGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#D97706;stop-opacity:0.1"/>
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:0.05"/>
    </linearGradient>
    
    <linearGradient id="fileGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7C3AED;stop-opacity:0.1"/>
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:0.05"/>
    </linearGradient>
    
    <!-- Component gradients -->
    <linearGradient id="componentUI" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6366F1;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#4F46E5;stop-opacity:1"/>
    </linearGradient>
    
    <linearGradient id="componentService" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1"/>
    </linearGradient>
    
    <linearGradient id="componentDB" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1"/>
    </linearGradient>
    
    <linearGradient id="componentFile" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1"/>
    </linearGradient>
    
    <!-- Drop shadow filter -->
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="#000000" flood-opacity="0.1"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#F8FAFC"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1E293B">
    Exception Management System Architecture
  </text>
  
  <!-- Layer backgrounds -->
  <!-- Layer 1 - UI Layer -->
  <rect x="50" y="80" width="1100" height="140" rx="8" fill="url(#uiGradient)" stroke="#4F46E5" stroke-width="1" opacity="0.3"/>
  <text x="70" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4F46E5">
    Layer 1 - Frontend UI
  </text>
  
  <!-- Layer 2 - Service Layer -->
  <rect x="50" y="250" width="1100" height="180" rx="8" fill="url(#serviceGradient)" stroke="#059669" stroke-width="1" opacity="0.3"/>
  <text x="70" y="275" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#059669">
    Layer 2 - Services Layer
  </text>
  
  <!-- Layer 3 - Database Layer -->
  <rect x="50" y="460" width="1100" height="120" rx="8" fill="url(#dbGradient)" stroke="#D97706" stroke-width="1" opacity="0.3"/>
  <text x="70" y="485" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#D97706">
    Layer 3 - Data Layer
  </text>
  
  <!-- Layer 4 - File Ingestion Layer -->
  <rect x="50" y="610" width="1100" height="140" rx="8" fill="url(#fileGradient)" stroke="#7C3AED" stroke-width="1" opacity="0.3"/>
  <text x="70" y="635" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#7C3AED">
    Layer 4 - File Ingestion Layer
  </text>
  
  <!-- Layer 1 Components - Frontend UI -->
  <rect x="150" y="120" width="200" height="80" rx="12" fill="url(#componentUI)" filter="url(#dropShadow)"/>
  <text x="250" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Exception Screen
  </text>
  <text x="250" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    View & Edit Exceptions
  </text>
  <text x="250" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Status Management
  </text>
  <text x="250" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Filter & Search
  </text>
  
  <rect x="400" y="120" width="200" height="80" rx="12" fill="url(#componentUI)" filter="url(#dropShadow)"/>
  <text x="500" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Workflow Initiation
  </text>
  <text x="500" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Trigger Workflows
  </text>
  <text x="500" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Status Updates
  </text>
  
  <rect x="650" y="120" width="200" height="80" rx="12" fill="url(#componentUI)" filter="url(#dropShadow)"/>
  <text x="750" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Reporting Screen
  </text>
  <text x="750" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Analytics Dashboard
  </text>
  <text x="750" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Export Features
  </text>
  
  <rect x="900" y="120" width="200" height="80" rx="12" fill="url(#componentUI)" filter="url(#dropShadow)"/>
  <text x="1000" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    User Management
  </text>
  <text x="1000" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Entitlements
  </text>
  <text x="1000" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Access Control
  </text>
  
  <!-- Layer 2 Components - Services -->
  <rect x="100" y="300" width="180" height="100" rx="12" fill="url(#componentService)" filter="url(#dropShadow)"/>
  <text x="190" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Workflow Integration
  </text>
  <text x="190" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Service
  </text>
  <text x="190" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Workflow Creation
  </text>
  <text x="190" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Status Tracking
  </text>
  <text x="190" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Notifications
  </text>
  
  <rect x="320" y="300" width="180" height="100" rx="12" fill="url(#componentService)" filter="url(#dropShadow)"/>
  <text x="410" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Entitlement Service
  </text>
  <text x="410" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • User Authorization
  </text>
  <text x="410" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Role Management
  </text>
  <text x="410" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Access Control
  </text>
  
  <rect x="540" y="300" width="180" height="100" rx="12" fill="url(#componentService)" filter="url(#dropShadow)"/>
  <text x="630" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Exception Aging
  </text>
  <text x="630" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Service
  </text>
  <text x="630" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Age Calculation
  </text>
  <text x="630" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Priority Assignment
  </text>
  <text x="630" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Escalation Logic
  </text>
  
  <rect x="760" y="300" width="180" height="100" rx="12" fill="url(#componentService)" filter="url(#dropShadow)"/>
  <text x="850" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Reporting Service
  </text>
  <text x="850" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Data Aggregation
  </text>
  <text x="850" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Report Generation
  </text>
  <text x="850" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Export Functions
  </text>
  
  <rect x="980" y="300" width="180" height="100" rx="12" fill="url(#componentService)" filter="url(#dropShadow)"/>
  <text x="1070" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Audit & Logging
  </text>
  <text x="1070" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Service
  </text>
  <text x="1070" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Activity Tracking
  </text>
  <text x="1070" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Compliance Logs
  </text>
  <text x="1070" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Error Handling
  </text>
  
  <!-- Layer 3 Components - Database -->
  <rect x="400" y="500" width="400" height="60" rx="12" fill="url(#componentDB)" filter="url(#dropShadow)"/>
  <text x="600" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Central Exception Database
  </text>
  <text x="600" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Exception Data • Status Tracking • Audit Trail • User Management • Configuration
  </text>
  
  <!-- Layer 4 Components - File Ingestion -->
  <rect x="200" y="650" width="250" height="80" rx="12" fill="url(#componentFile)" filter="url(#dropShadow)"/>
  <text x="325" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    File Watcher Service
  </text>
  <text x="325" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Monitor File Drops
  </text>
  <text x="325" y="710" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Trigger Processing
  </text>
  <text x="325" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Schedule Management
  </text>
  
  <rect x="500" y="650" width="250" height="80" rx="12" fill="url(#componentFile)" filter="url(#dropShadow)"/>
  <text x="625" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    File Validation Service
  </text>
  <text x="625" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Schema Validation
  </text>
  <text x="625" y="710" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Data Quality Checks
  </text>
  <text x="625" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Error Handling
  </text>
  
  <rect x="800" y="650" width="250" height="80" rx="12" fill="url(#componentFile)" filter="url(#dropShadow)"/>
  <text x="925" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Data Transformation
  </text>
  <text x="925" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    Service
  </text>
  <text x="925" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Parse Exception Files
  </text>
  <text x="925" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    • Data Enrichment
  </text>
  
  <!-- Data Flow Arrows -->
  <!-- File to Database -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B"/>
    </marker>
  </defs>
  
  <!-- File layer to Database -->
  <path d="M 450 650 L 500 580" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 625 650 L 600 580" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 800 650 L 700 580" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Database to Services -->
  <path d="M 450 500 L 250 400" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 500 500 L 410 400" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 600 500 L 630 400" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 650 500 L 850 400" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 750 500 L 1070 400" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Services to UI -->
  <path d="M 250 300 L 250 200" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 410 300 L 500 200" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 630 300 L 750 200" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 850 300 L 750 200" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 1070 300 L 1000 200" stroke="#64748B" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- External Systems -->
  <rect x="70" y="300" width="20" height="60" rx="4" fill="#6B7280" opacity="0.7"/>
  <text x="35" y="335" font-family="Arial, sans-serif" font-size="10" fill="#6B7280" transform="rotate(-90 35 335)">
    External Workflow System
  </text>
  
  <!-- Connection line to workflow service -->
  <path d="M 90 330 L 100 330" stroke="#6B7280" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  
</svg>