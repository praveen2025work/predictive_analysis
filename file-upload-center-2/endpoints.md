# File Upload Center API Endpoints

This document lists all available API endpoints for the File Upload Center, including endpoint URLs, request types, parameters, request bodies, and response formats.

| Endpoint | Request Type | Description | Request Parameters | Request Body | Response |
|----------|--------------|-------------|--------------------|--------------|----------|
| `/api/upload` | POST | Uploads a file to the specified location. | None | Form-data:<br>- `file`: Binary file (`.png`, `.jpg`, `.jpeg`, `.pdf`)<br>- `file_location`: String (must start with `UPLOAD_BASE_DIR`) | **Success (201):**<br>```json<br>{<br>  "status": "success",<br>  "data": {<br>    "upload_id": integer,<br>    "filename": "string",<br>    "size": integer,<br>    "upload_time": "string",<br>    "file_location": "string"<br>  }<br>}<br>```<br>**Error (400):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Missing file or file location"<br>}<br>``` or<br>```json<br>{<br>  "status": "error",<br>  "message": "Invalid file type"<br>}<br>``` or<br>```json<br>{<br>  "status": "error",<br>  "message": "Invalid or inaccessible file location"<br>}<br>```<br>**Error (401):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Missing user ID in headers"<br>}<br>```<br>**Error (500):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Database error"<br>}<br>``` |
| `/api/share/<upload_id>` | POST | Shares a file with another user. | Path:<br>- `upload_id`: Integer | ```json<br>{<br>  "shared_with": "string"<br>}<br>``` | **Success (200):**<br>```json<br>{<br>  "status": "success",<br>  "message": "Shared upload {upload_id} with {shared_with} successfully"<br>}<br>```<br>**Error (400):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Please provide a user ID to share with"<br>}<br>```<br>**Error (401):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Missing user ID in headers"<br>}<br>```<br>**Error (404):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Upload not found or not owned"<br>}<br>```<br>**Error (500):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Database error"<br>}<br>``` |
| `/api/uploads` | GET | Lists uploads owned by or shared with the user. | Query:<br>- `from_date`: String (YYYY-MM-DD, optional)<br>- `to_date`: String (YYYY-MM-DD, optional)<br>- `search`: String (optional) | None | **Success (200):**<br>```json<br>{<br>  "status": "success",<br>  "data": [{<br>    "id": integer,<br>    "filename": "string",<br>    "size": integer,<br>    "upload_time": "string",<br>    "user_id": "string",<br>    "file_location": "string",<br>    "download_count": integer<br>  }]<br>}<br>```<br>**Error (400):**<br>```json<br>{<br>  "status": "error",<br>  "message": "From date cannot be after to date"<br>}<br>``` or<br>```json<br>{<br>  "status": "error",<br>  "message": "Invalid date format"<br>}<br>```<br>**Error (401):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Missing user ID in headers"<br>}<br>``` |
| `/api/download/<filename>` | GET | Downloads a file if owned or shared. | Path:<br>- `filename`: String | None | **Success (200):** Binary file attachment<br>**Error (401):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Missing user ID in headers"<br>}<br>```<br>**Error (403):**<br>```json<br>{<br>  "status": "error",<br>  "message": "File not accessible"<br>}<br>```<br>**Error (404):**<br>```json<br>{<br>  "status": "error",<br>  "message": "File not found"<br>}<br>```<br>**Error (500):**<br>```json<br>{<br>  "status": "error",<br>  "message": "Server error"<br>}<br>``` |
| `/api/health` | GET | Checks server status. | None | None | **Success (200):**<br>```json<br>{<br>  "status": "success",<br>  "data": {<br>    "server": "running",<br>    "debug_mode": boolean<br>  }<br>}<br>``` |

## Notes
- **Base URL**: Use `http://{SERVER_HOST}:{PORT}` as configured in `env/{env}.env`.
- **Headers**: Include `X-User-Id: <user_id>` in all requests to `/api/upload`, `/api/share/<upload_id>`, `/api/uploads`, and `/api/download/<filename>`.
- **CORS**: Requests must originate from `ALLOWED_ORIGINS` (e.g., `http://localhost:3001`).
- **Authentication**: The UI must authenticate users externally and provide a valid `user_id`.